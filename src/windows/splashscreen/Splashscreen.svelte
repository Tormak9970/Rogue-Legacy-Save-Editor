<!--
 Rogue Legacy Save Editor is a tool for viewing and modifying game saves from Rogue Legacy 1 & 2.
 Copyright (C) 2023 Travis Lane (Tormak)
 
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with this program. If not, see <https://www.gnu.org/licenses/>
 -->
 <script lang="ts">
  import { onMount } from "svelte";
  import { draw } from "svelte/transition";
  import { AppController } from "../../lib/controllers/AppController";

  import { cubicOut, quintOut } from 'svelte/easing';

  function expand(node, params) {
    const {
      delay = 0,
      duration = 400,
      easing = cubicOut
    } = params;

    const w = parseFloat(getComputedStyle(node).strokeWidth);

    return {
      delay,
      duration,
      easing,
      css: t => `opacity: ${t}; stroke-width: ${t * w}`
    };
  }

  let visible = false;

  onMount(() => {
    setInterval(() => {
      visible = !visible;
    }, 2600);
  });
</script>

<main>
  <div class="content">
    {#if visible}
      <svg width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1_2)">
          <path
            in:draw="{{duration: 1000}}"
            out:draw="{{duration: 1000, delay: 400}}"
            d="M128.014 199.143C127.83 199.304 111.802 213.854 93.006 225.492L92.9562 225.477C82.6586 205.915 76.2273 185.243 76.1508 185.013L71.1359 168.782L65.1641 188.382C65.1641 188.382 74.2367 217.82 88.707 241.134L88.7262 241.137C113.023 228.386 135.774 207.618 135.774 207.618L140.57 187.697L128.014 199.143Z"
            stroke="#22AEFF" />
          <path
            in:expand="{{duration: 400, delay: 1000, easing: quintOut}}"
            out:expand="{{duration: 400, delay: 0, easing: quintOut}}"
            d="M128.014 199.143C127.83 199.304 111.802 213.854 93.006 225.492L92.9562 225.477C82.6586 205.915 76.2273 185.243 76.1508 185.013L71.1359 168.782L65.1641 188.382C65.1641 188.382 74.2367 217.82 88.707 241.134L88.7262 241.137C113.023 228.386 135.774 207.618 135.774 207.618L140.57 187.697L128.014 199.143Z"
            fill="#22AEFF" />
          <path
            in:draw="{{duration: 1000}}"
            out:draw="{{duration: 1000, delay: 400}}"
            d="M150.382 69.5034L121.043 187.678L100.126 199.281L100.115 199.277L87.9759 178.67L122.632 61.9429"
            stroke="#22AEFF" />
          <path
            in:expand="{{duration: 400, delay: 1000, easing: quintOut}}"
            out:expand="{{duration: 400, delay: 0, easing: quintOut}}"
            d="M150.382 69.5034L121.043 187.678L100.126 199.281L100.115 199.277L87.9759 178.67L122.632 61.9429"
            fill="#22AEFF" />
          <path
            in:draw="{{duration: 1000}}"
            out:draw="{{duration: 1000, delay: 400}}"
            d="M141.838 46.1174C137.726 45.0034 133.025 49.1608 131.329 55.4006C129.637 61.6443 131.594 67.6085 135.705 68.7225C139.812 69.8365 144.517 65.6791 146.213 59.4393C147.905 53.1995 145.949 47.2314 141.838 46.1174Z"
            stroke="#22AEFF" />
          <path
            in:expand="{{duration: 400, delay: 1000, easing: quintOut}}"
            out:expand="{{duration: 400, delay: 0, easing: quintOut}}"
            d="M141.838 46.1174C137.726 45.0034 133.025 49.1608 131.329 55.4006C129.637 61.6443 131.594 67.6085 135.705 68.7225C139.812 69.8365 144.517 65.6791 146.213 59.4393C147.905 53.1995 145.949 47.2314 141.838 46.1174Z"
            fill="#22AEFF" />
          <path
            in:draw="{{duration: 1000}}"
            out:draw="{{duration: 1000, delay: 400}}"
            d="M166.016 46.8065C163.727 45.459 160.599 44.0694 156.687 42.6568L165.499 9.78086C166.047 7.7443 164.841 5.65032 162.808 5.09524L144.594 0.133989C142.576 -0.421089 140.463 0.773286 139.897 2.80602L130.813 35.6092C126.728 34.8436 123.325 34.4531 120.672 34.4531C100.379 34.4531 94.2731 49.3522 93.8788 57.2305C93.8252 58.2755 94.208 59.3015 94.9277 60.0595C95.6513 60.8213 96.6581 61.25 97.7031 61.25H99.8392L61.5006 187.264C61.2785 187.995 61.2785 188.776 61.5044 189.507C61.8834 190.725 70.8259 219.466 85.2923 242.883C85.7785 243.84 86.6628 244.575 87.7615 244.858C88.0754 244.939 88.3931 244.977 88.7109 244.977C89.3999 244.977 90.0698 244.789 90.6556 244.445C115.052 231.605 137.416 211.301 138.358 210.444C138.921 209.927 139.322 209.253 139.502 208.51L170.38 80.4595L172.225 81.5467C172.819 81.8951 173.489 82.075 174.166 82.075C174.518 82.075 174.874 82.0252 175.215 81.9257C176.226 81.6386 177.068 80.9495 177.554 80.0193C181.206 73.0368 183.503 57.1003 166.016 46.8065ZM107.848 61.25H108.341C112.273 61.25 115.466 61.6328 118.543 62.2836L84.3047 177.579C84.0023 178.597 84.1363 179.696 84.6798 180.611L95.9996 199.832L87.4284 231.284C77.4447 212.959 70.7416 193.179 69.1759 188.359L107.848 61.25ZM133.615 76.084C133.626 76.0878 133.634 76.0955 133.645 76.0993L133.68 76.107C133.714 76.1146 133.745 76.1261 133.776 76.1337C133.814 76.1414 133.848 76.1376 133.887 76.1491C137.753 77.1291 141.834 76.283 145.371 73.7986L117.732 185.14L101.527 194.128L92.1217 178.161L124.779 68.1904C126.586 72.1716 129.725 74.9968 133.615 76.084ZM132.332 205.563C128.539 208.924 112.717 222.579 94.8091 233.313L103.384 201.853L122.9 191.027C123.826 190.51 124.5 189.634 124.756 188.6L153.735 71.873C156.721 72.876 159.661 74.1661 163.045 76.1567L163.478 76.4094L132.332 205.563ZM172.091 72.5927L166.939 69.557C160.075 65.5184 154.658 63.8378 148.139 62.4444C147.871 62.387 147.599 62.3602 147.335 62.3602C146.052 62.3602 144.835 63.0033 144.119 64.1134C143.392 65.2389 142.622 66.1615 141.838 66.8505C139.885 68.5655 137.642 69.2584 135.693 68.7187C133.737 68.1866 132.152 66.4601 131.341 63.9909C131.015 62.9956 130.82 61.8166 130.77 60.4805C130.705 58.888 129.664 57.5023 128.152 57.0008C121.828 54.8953 116.308 53.5938 108.338 53.5938H102.358C103.901 48.9502 108.284 42.1094 120.668 42.1094C123.47 42.1094 127.639 42.6989 132.727 43.8129C134.713 44.2378 136.693 43.0549 137.236 41.0949L139.981 31.1877L140.061 31.2107C140.387 31.2988 140.724 31.3409 141.057 31.3409C141.723 31.3409 142.385 31.1686 142.967 30.8279C143.847 30.3226 144.49 29.4842 144.755 28.5042L145.746 24.8063C146.294 22.7697 145.088 20.6719 143.051 20.1206L146.263 8.52141L157.119 11.4844L154.007 23.0989C151.994 22.5515 149.888 23.7535 149.329 25.7863L148.319 29.4766C148.051 30.4566 148.185 31.5055 148.694 32.3898C149.199 33.2702 150.037 33.9172 151.014 34.1813L151.033 34.1852L148.368 44.1268C147.84 46.0906 148.943 48.1234 150.872 48.755C155.822 50.3781 159.719 51.9859 162.13 53.4062C172.811 59.6881 173.11 67.8114 172.091 72.5927Z"
            stroke="#227AFF" />
          <path
            in:expand="{{duration: 400, delay: 1000, easing: quintOut}}"
            out:expand="{{duration: 400, delay: 0, easing: quintOut}}"
            d="M166.016 46.8065C163.727 45.459 160.599 44.0694 156.687 42.6568L165.499 9.78086C166.047 7.7443 164.841 5.65032 162.808 5.09524L144.594 0.133989C142.576 -0.421089 140.463 0.773286 139.897 2.80602L130.813 35.6092C126.728 34.8436 123.325 34.4531 120.672 34.4531C100.379 34.4531 94.2731 49.3522 93.8788 57.2305C93.8252 58.2755 94.208 59.3015 94.9277 60.0595C95.6513 60.8213 96.6581 61.25 97.7031 61.25H99.8392L61.5006 187.264C61.2785 187.995 61.2785 188.776 61.5044 189.507C61.8834 190.725 70.8259 219.466 85.2923 242.883C85.7785 243.84 86.6628 244.575 87.7615 244.858C88.0754 244.939 88.3931 244.977 88.7109 244.977C89.3999 244.977 90.0698 244.789 90.6556 244.445C115.052 231.605 137.416 211.301 138.358 210.444C138.921 209.927 139.322 209.253 139.502 208.51L170.38 80.4595L172.225 81.5467C172.819 81.8951 173.489 82.075 174.166 82.075C174.518 82.075 174.874 82.0252 175.215 81.9257C176.226 81.6386 177.068 80.9495 177.554 80.0193C181.206 73.0368 183.503 57.1003 166.016 46.8065ZM107.848 61.25H108.341C112.273 61.25 115.466 61.6328 118.543 62.2836L84.3047 177.579C84.0023 178.597 84.1363 179.696 84.6798 180.611L95.9996 199.832L87.4284 231.284C77.4447 212.959 70.7416 193.179 69.1759 188.359L107.848 61.25ZM133.615 76.084C133.626 76.0878 133.634 76.0955 133.645 76.0993L133.68 76.107C133.714 76.1146 133.745 76.1261 133.776 76.1337C133.814 76.1414 133.848 76.1376 133.887 76.1491C137.753 77.1291 141.834 76.283 145.371 73.7986L117.732 185.14L101.527 194.128L92.1217 178.161L124.779 68.1904C126.586 72.1716 129.725 74.9968 133.615 76.084ZM132.332 205.563C128.539 208.924 112.717 222.579 94.8091 233.313L103.384 201.853L122.9 191.027C123.826 190.51 124.5 189.634 124.756 188.6L153.735 71.873C156.721 72.876 159.661 74.1661 163.045 76.1567L163.478 76.4094L132.332 205.563ZM172.091 72.5927L166.939 69.557C160.075 65.5184 154.658 63.8378 148.139 62.4444C147.871 62.387 147.599 62.3602 147.335 62.3602C146.052 62.3602 144.835 63.0033 144.119 64.1134C143.392 65.2389 142.622 66.1615 141.838 66.8505C139.885 68.5655 137.642 69.2584 135.693 68.7187C133.737 68.1866 132.152 66.4601 131.341 63.9909C131.015 62.9956 130.82 61.8166 130.77 60.4805C130.705 58.888 129.664 57.5023 128.152 57.0008C121.828 54.8953 116.308 53.5938 108.338 53.5938H102.358C103.901 48.9502 108.284 42.1094 120.668 42.1094C123.47 42.1094 127.639 42.6989 132.727 43.8129C134.713 44.2378 136.693 43.0549 137.236 41.0949L139.981 31.1877L140.061 31.2107C140.387 31.2988 140.724 31.3409 141.057 31.3409C141.723 31.3409 142.385 31.1686 142.967 30.8279C143.847 30.3226 144.49 29.4842 144.755 28.5042L145.746 24.8063C146.294 22.7697 145.088 20.6719 143.051 20.1206L146.263 8.52141L157.119 11.4844L154.007 23.0989C151.994 22.5515 149.888 23.7535 149.329 25.7863L148.319 29.4766C148.051 30.4566 148.185 31.5055 148.694 32.3898C149.199 33.2702 150.037 33.9172 151.014 34.1813L151.033 34.1852L148.368 44.1268C147.84 46.0906 148.943 48.1234 150.872 48.755C155.822 50.3781 159.719 51.9859 162.13 53.4062C172.811 59.6881 173.11 67.8114 172.091 72.5927Z"
            fill="#227AFF" />
        </g>
        <defs>
          <clipPath id="clip0_1_2">
            <rect width="245" height="245" fill="white" transform="translate(2)" />
          </clipPath>
        </defs>
      </svg>
    {/if}
  </div>
</main>

<style>
  @import "/theme.css";

  main {
    width: 100%;
    height: 100%;

    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;

    color: var(--font-color);
  }

  .content {
    z-index: 1;
    padding: 25px;
    width: calc(100% - 50px);
    height: calc(100% - 50px);

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
</style>
